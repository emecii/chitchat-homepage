{"ast":null,"code":"import _defineProperty from\"/Users/emecii/Workspace/landy-react-template/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/emecii/Workspace/landy-react-template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/emecii/Workspace/landy-react-template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{notification}from\"antd\";import axios from\"axios\";export var useForm=function useForm(validate){var _useState=useState({name:\"\",email:\"\",message:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),shouldSubmit=_useState6[0],setShouldSubmit=_useState6[1];var openNotificationWithIcon=function openNotificationWithIcon(){notification[\"success\"]({message:\"Success\",description:\"Your message has been sent!\"});};var handleSubmit=function handleSubmit(event){event.preventDefault();setErrors(validate(values));// Your url for API\nvar url=\"\";if(Object.values(values).every(function(x){return x!==\"\";})){axios.post(url,_objectSpread({},values)).then(function(){setShouldSubmit(true);});}};useEffect(function(){if(Object.keys(errors).length===0&&shouldSubmit){setValues(function(values){return values={name:\"\",email:\"\",message:\"\"};});openNotificationWithIcon();}},[errors,shouldSubmit]);var handleChange=function handleChange(event){event.persist();setValues(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},event.target.name,event.target.value));});setErrors(function(errors){return _objectSpread(_objectSpread({},errors),{},_defineProperty({},event.target.name,\"\"));});};return{handleChange:handleChange,handleSubmit:handleSubmit,values:values,errors:errors};};","map":{"version":3,"names":["useState","useEffect","notification","axios","useForm","validate","_useState","name","email","message","_useState2","_slicedToArray","values","setValues","_useState3","_useState4","errors","setErrors","_useState5","_useState6","shouldSubmit","setShouldSubmit","openNotificationWithIcon","description","handleSubmit","event","preventDefault","url","Object","every","x","post","_objectSpread","then","keys","length","handleChange","persist","_defineProperty","target","value"],"sources":["/Users/emecii/Workspace/landy-react-template/src/common/utils/useForm.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { notification } from \"antd\";\r\nimport axios from \"axios\";\r\n\r\nexport const useForm = (validate: any) => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    message: \"\",\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [shouldSubmit, setShouldSubmit] = useState(false);\r\n\r\n  const openNotificationWithIcon = () => {\r\n    notification[\"success\"]({\r\n      message: \"Success\",\r\n      description: \"Your message has been sent!\",\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (event: React.ChangeEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    setErrors(validate(values));\r\n    // Your url for API\r\n    const url = \"\";\r\n    if (Object.values(values).every((x) => x !== \"\")) {\r\n      axios\r\n        .post(url, {\r\n          ...values,\r\n        })\r\n        .then(() => {\r\n          setShouldSubmit(true);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors).length === 0 && shouldSubmit) {\r\n      setValues((values) => (values = { name: \"\", email: \"\", message: \"\" }));\r\n      openNotificationWithIcon();\r\n    }\r\n  }, [errors, shouldSubmit]);\r\n\r\n  const handleChange = (\r\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    event.persist();\r\n    setValues((values) => ({\r\n      ...values,\r\n      [event.target.name]: event.target.value,\r\n    }));\r\n    setErrors((errors) => ({ ...errors, [event.target.name]: \"\" }));\r\n  };\r\n\r\n  return {\r\n    handleChange,\r\n    handleSubmit,\r\n    values,\r\n    errors,\r\n  };\r\n};\r\n"],"mappings":"uYAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,YAAY,KAAQ,MAAM,CACnC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,IAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,QAAa,CAAK,CACxC,IAAAC,SAAA,CAA4BN,QAAQ,CAAC,CACnCO,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACX,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAL,SAAA,IAJKM,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IAKxB,IAAAI,UAAA,CAA4Bd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAe,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAAwClB,QAAQ,CAAC,KAAK,CAAC,CAAAmB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAhDE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC,GAAM,CAAAG,wBAAwB,CAAG,QAA3B,CAAAA,wBAAwBA,CAAA,CAAS,CACrCpB,YAAY,CAAC,SAAS,CAAC,CAAC,CACtBO,OAAO,CAAE,SAAS,CAClBc,WAAW,CAAE,6BACf,CAAC,CAAC,CACJ,CAAC,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAyC,CAAK,CAClEA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBT,SAAS,CAACZ,QAAQ,CAACO,MAAM,CAAC,CAAC,CAC3B;AACA,GAAM,CAAAe,GAAG,CAAG,EAAE,CACd,GAAIC,MAAM,CAAChB,MAAM,CAACA,MAAM,CAAC,CAACiB,KAAK,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,GAAK,EAAE,GAAC,CAAE,CAChD3B,KAAK,CACF4B,IAAI,CAACJ,GAAG,CAAAK,aAAA,IACJpB,MAAM,CACV,CAAC,CACDqB,IAAI,CAAC,UAAM,CACVZ,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAAC,CACN,CACF,CAAC,CAEDpB,SAAS,CAAC,UAAM,CACd,GAAI2B,MAAM,CAACM,IAAI,CAAClB,MAAM,CAAC,CAACmB,MAAM,GAAK,CAAC,EAAIf,YAAY,CAAE,CACpDP,SAAS,CAAC,SAACD,MAAM,QAAM,CAAAA,MAAM,CAAG,CAAEL,IAAI,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAG,CAAC,EAAC,CAAC,CACtEa,wBAAwB,CAAC,CAAC,CAC5B,CACF,CAAC,CAAE,CAACN,MAAM,CAAEI,YAAY,CAAC,CAAC,CAE1B,GAAM,CAAAgB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAChBX,KAAgE,CAC7D,CACHA,KAAK,CAACY,OAAO,CAAC,CAAC,CACfxB,SAAS,CAAC,SAACD,MAAM,SAAAoB,aAAA,CAAAA,aAAA,IACZpB,MAAM,KAAA0B,eAAA,IACRb,KAAK,CAACc,MAAM,CAAChC,IAAI,CAAGkB,KAAK,CAACc,MAAM,CAACC,KAAK,IACvC,CAAC,CACHvB,SAAS,CAAC,SAACD,MAAM,SAAAgB,aAAA,CAAAA,aAAA,IAAWhB,MAAM,KAAAsB,eAAA,IAAGb,KAAK,CAACc,MAAM,CAAChC,IAAI,CAAG,EAAE,IAAG,CAAC,CACjE,CAAC,CAED,MAAO,CACL6B,YAAY,CAAZA,YAAY,CACZZ,YAAY,CAAZA,YAAY,CACZZ,MAAM,CAANA,MAAM,CACNI,MAAM,CAANA,MACF,CAAC,CACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}